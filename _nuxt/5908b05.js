(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{483:function(e,t,n){var content=n(652);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(14).default)("115979c0",content,!0,{sourceMap:!1})},484:function(e,t,n){var content=n(654);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(14).default)("0af26d6a",content,!0,{sourceMap:!1})},651:function(e,t,n){"use strict";n(483)},652:function(e,t,n){var o=n(13)((function(i){return i[1]}));o.push([e.i,'.dia[data-v-2efafade]{background-color:#f4f2f2;border:1px solid #fff;border-radius:5px;color:#1519f5;cursor:pointer;height:2.7rem;margin:5px;padding:6px 10px}p[data-v-2efafade]{margin:0;padding:0}.main-container[data-v-2efafade]{display:flex;flex-direction:row;font-family:"Arial",sans-serif;margin:0 auto;min-height:100vh;width:100%}.sidebar[data-v-2efafade]{background-color:#f0f0f0;border-right:1px solid #ccc;display:flex;flex-direction:column;overflow-y:scroll;width:30%}.sidebar[data-v-2efafade]::-webkit-scrollbar{display:none}.sidebar[data-v-2efafade]{-ms-overflow-style:none;scrollbar-width:none}.sidebar-header[data-v-2efafade]{background-color:#1877f2;color:#fff;padding:20px;text-align:center}.contact-list[data-v-2efafade]{flex:1;overflow-y:auto}.contact-item[data-v-2efafade]{align-items:center;cursor:pointer;display:flex;padding:10px;transition:background-color .2s}.contact-item[data-v-2efafade]:hover{background-color:#ddd}.contact-item .avatar[data-v-2efafade]{border-radius:50%;height:40px;margin-right:10px;width:40px}.contact-item h4[data-v-2efafade]{font-size:16px;margin:0}.chat-container[data-v-2efafade]{display:flex;flex:1;flex-direction:column}.chat-header[data-v-2efafade]{align-items:center;background-color:#1877f2;color:#fff;display:flex;justify-content:space-between;padding:10px;width:100%}.chat-window[data-v-2efafade]{background-color:#f8f9fa;flex:1;margin:0 auto;max-height:85vh;overflow-y:auto;padding:10px;width:58%}.chat-message[data-v-2efafade]{display:flex;flex-wrap:wrap;margin-bottom:10px}.chat-message.sent[data-v-2efafade]{justify-content:flex-end}.chat-message.received[data-v-2efafade]{justify-content:flex-start;max-width:70%}.message-bubble[data-v-2efafade]{font-size:14px;height:-moz-fit-content;height:fit-content;margin-bottom:6px;margin-top:6px;max-width:70%;min-height:-moz-fit-content;min-height:fit-content;padding:10px 10px 0;position:relative}.sent .message-bubble[data-v-2efafade]{background-color:#1877f2;border-radius:20px;border-bottom-right-radius:0;color:#fff;padding:15px}.received .message-bubble[data-v-2efafade]{background-color:#f1f1f1;border-radius:20px;border-bottom-left-radius:0;color:#2c2c2c;padding:15px}.sent .message-time[data-v-2efafade]{left:-70px}.received .message-time[data-v-2efafade],.sent .message-time[data-v-2efafade]{color:#999;font-size:13px;position:absolute;top:30%}.received .message-time[data-v-2efafade]{right:-60px}.chat-input[data-v-2efafade]{background-color:#fff;border-top:1px solid #ddd;display:flex;margin:0 auto;padding:10px;width:58%}.chat-input input[data-v-2efafade]{border:1px solid #ddd;border-radius:5px;flex:1;margin-right:10px;padding:10px}.chat-input button[data-v-2efafade]{background-color:#316ff6;border-radius:3px;color:#fff;cursor:pointer}.input-group[data-v-2efafade]{position:relative}.input-group .form-input[data-v-2efafade]{background:none;background-color:#fff;border:none;border-bottom:1px solid #000;border-radius:0;display:block;padding:3px;width:100%}.input-group .form-input[data-v-2efafade]:focus{border-color:#1519f5;outline:none}.input-group .form-input:focus~.form-input-label[data-v-2efafade],.input-group .form-input:not([value=""])~.form-input-label[data-v-2efafade]{color:#181d2f;left:3px;top:-18px}.input-group .form-input-label[data-v-2efafade]{font-size:14px;font-weight:400;left:3px;pointer-events:none;position:absolute;top:0;transition:all .3s ease}.input-group .form-input-label.shrink[data-v-2efafade]{color:#181d2f;left:3px;top:-18px}.col-md-12[data-v-2efafade],.col-md-6[data-v-2efafade]{padding-left:0;padding-right:0}@media screen and (max-width:1000px){.main-container[data-v-2efafade]{flex-direction:column;margin:0 auto;min-height:100vh;width:100%}.chat-input[data-v-2efafade],.chat-window[data-v-2efafade],.sidebar[data-v-2efafade]{width:100%}.sidebar[data-v-2efafade]{border-bottom:1px solid #ccc;border-right:none;height:auto}.chat-container[data-v-2efafade]{width:100%}.contact-item h4[data-v-2efafade]{font-size:14px}.chat-header h3[data-v-2efafade]{font-size:16px}.message-bubble[data-v-2efafade]{font-size:14px}.message-time[data-v-2efafade]{font-size:15px}}@media screen and (max-width:480px){.main-container[data-v-2efafade]{margin:0 auto;width:100%}.sidebar-header[data-v-2efafade]{padding:15px}.contact-item .avatar[data-v-2efafade]{height:30px;width:30px}.chat-header h3[data-v-2efafade]{font-size:14px}.chat-input input[data-v-2efafade]{font-size:14px;padding:8px}}',""]),o.locals={},e.exports=o},653:function(e,t,n){"use strict";n(484)},654:function(e,t,n){var o=n(13)((function(i){return i[1]}));o.push([e.i,".el-dialog{width:30%}.el-dialog__header{display:none}.VueCarousel-pagination{bottom:30px;position:absolute}@media only screen and (max-width:1000px){.el-dialog{width:90%}}",""]),o.locals={},e.exports=o},878:function(e,t,n){"use strict";n.r(t);var o=n(6),r=(n(29),n(32),n(17)),c=n(161),d={layout:"default2",middleware:["CheckUser"],data:function(){return{contacts:[],messages:[],newMessage:"",activeChat:null,chat_id:"",chat:null,user:{userId:"",email:"",phone:"",name:"",about:"",avatar:"",login_type:"",subscription:[],active:!1,block:!1,free_ad:0,notification_id:""},user1:{userId:"",email:"",phone:"",name:"",about:"",avatar:"",login_type:"",subscription:[],active:!1,block:!1,free_ad:0,notification_id:""},ads:null,dialogVisiblee:!1,dialogVisible:!1,dialogVisibles:!1,selected:"",comment:"",blck:!0,arr:["Inappropriate profile picture","This user is threatening me","This User is insulting me","Spam","Fraud","Other"]}},mounted:function(){this.getData()},methods:{sendMessage:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,c,d,l,f,m,dt,data,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=(n=e).blck){t.next=3;break}return t.abrupt("return");case 3:if(""===n.newMessage.trim()){t.next=21;break}if(c=function(e){var t=e.getHours(),n=e.getMinutes(),o=t>=12?"PM":"AM";return(t=(t=(t%=12)||12)<10?"0"+t:t)+":"+(n=n<10?"0"+n:n)+" "+o},d=new Date,l=d.getFullYear(),f=d.getMonth()+1,m=d.getDate(),dt="".concat(m<10?"0"+m:m,"-").concat(f<10?"0"+f:f,"-").concat(l),""==n.chat_id){t.next=17;break}return data={chat_id:n.chat_id,msg:n.newMessage,date:dt,time:c(d),read:!1,sent_by:n.$store.state.phone,msg_type:"Text"},t.next=14,r.a.collection("chat_msgs").create(data);case 14:n.newMessage="",t.next=20;break;case 17:return h={person1:n.$store.state.phone,person2:n.ads.userid,ad_id:n.ads.id,name1:n.user.name,name2:n.user1.name,image:"".concat(url,"/api/files/advertisement/").concat(n.ads.id,"/").concat(n.ads.field[0]),block:!1},t.next=20,r.a.collection("chat").create(h).then(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.a.collection("chat").unsubscribe(t.id),n.chat_id=t.id,n.chat=t,o={chat_id:n.chat_id,msg:n.newMessage,date:dt,time:c(d),read:!1,sent_by:n.$store.state.phone,msg_type:"Text"},e.next=6,r.a.collection("chat_msgs").create(o);case 6:n.newMessage="",r.a.collection("chat").subscribe(n.chat_id,(function(e){n.chat=e.record}),{});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 20:n.scrollToBottom();case 21:case"end":return t.stop()}}),t)})))()},scrollToBottom:function(){var e=this;e.$nextTick((function(){var t=e.$refs.chatWindow;t.scrollTop=t.scrollHeight}))},getData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,c,d,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.next=3,r.a.collection("user_Phone_Google_Fb_Login").getFirstListItem('userId="'.concat(n.$store.state.phone,'"'));case 3:return n.user=t.sent,o=n.$route.params.id,t.prev=5,c=!0,t.prev=7,t.next=10,r.a.collection("chat").getOne(o);case 10:n.chat=t.sent,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(7),c=!1;case 16:if(0!=c){t.next=20;break}return t.next=19,r.a.collection("chat").getFirstListItem('ad_id="'.concat(o,'"'));case 19:n.chat=t.sent;case 20:return t.next=22,r.a.collection("chat_msgs").getFullList({filter:'chat_id = "'.concat(n.chat.id,'" ')});case 22:return n.messages=t.sent,t.next=25,r.a.collection("advertisement").getOne(n.chat.ad_id);case 25:if(n.ads=t.sent,n.blck=1==n.ads.sold||1==n.ads.approve&&0==n.ads.active||1==n.ads.block,n.blck=1==n.blck?n.blck:n.chat.block,n.scrollToBottom(),0!=n.messages.length){t.next=31;break}throw new Error("");case 31:if(n.chat_id=n.chat.id,(d=n.messages[n.messages.length-1]).sent_by==n.$store.state.phone){t.next=36;break}return t.next=36,r.a.collection("chat_msgs").update(d.id,{read:!0});case 36:r.a.collection("advertisement").subscribe(n.chat.ad_id,(function(e){(1==e.record.sold||1==e.record.approve&&0==e.record.active||1==e.record.block)&&(n.blck=!0)}),{}),r.a.collection("chat_msgs").subscribe("*",(function(e){e.record.chat_id==n.chat_id&&"create"==e.action&&(n.messages.push(e.record),n.scrollToBottom())}),{}),r.a.collection("chat").subscribe(n.chat_id,(function(e){n.chat=e.record}),{}),t.next=44;break;case 41:t.prev=41,t.t1=t.catch(5),n.blck=!1;case 44:return t.prev=44,l=n.$route.params.id,t.next=48,r.a.collection("advertisement").getOne(l);case 48:return n.ads=t.sent,n.blck=1==n.ads.sold||1==n.ads.approve&&0==n.ads.active||1==n.ads.block,r.a.collection("advertisement").subscribe(l,(function(e){(1==e.record.sold||1==e.record.approve&&0==e.record.active||1==e.record.block)&&(n.blck=!0)}),{}),t.next=53,r.a.collection("user_Phone_Google_Fb_Login").getFirstListItem('userId="'.concat(n.ads.userid,'"'));case 53:n.user1=t.sent,t.next=58;break;case 56:t.prev=56,t.t2=t.catch(44);case 58:case"end":return t.stop()}}),t,null,[[5,41],[7,13],[44,56]])})))()},_back:function(){history.back()},_block:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e).dialogVisibles=!1,""==n.chat_id){t.next=5;break}return t.next=5,r.a.collection("chat").update(n.chat_id,{block:!0}).then((function(){Object(c.Message)({showClose:!0,message:"User blocked Successfully!",type:"success"})})).catch((function(){Object(c.Message)({showClose:!0,message:"Something went wrong!",type:"error"})}));case 5:case"end":return t.stop()}}),t)})))()},_report:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,d,l,f,dt,m,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=(n=e).selected){t.next=4;break}return Object(c.Message)({showClose:!0,message:"Reason is required!",type:"error"}),t.abrupt("return");case 4:if(""!=n.comment){t.next=7;break}return Object(c.Message)({showClose:!0,message:"Comment is required!",type:"error"}),t.abrupt("return");case 7:return n.dialogVisible=!1,o=new Date,d=o.getDate(),l=o.getMonth()+1,f=o.getFullYear(),dt="".concat(d<10?"0"+d:d,"-").concat(l<10?"0"+l:l,"-").concat(f),n.dialogVisible=!1,m=function(e){var t=e.getHours(),n=e.getMinutes(),o=t>=12?"PM":"AM";return(t=(t=(t%=12)||12)<10?"0"+t:t)+":"+(n=n<10?"0"+n:n)+" "+o},data={user_id:n.user1.userId,user_name:n.user1.name,user_email:n.user1.email,user_phone:n.user1.phone,type:n.selected,reason:n.comment,reported_by:n.$store.state.phone,date:dt,time:m(o),block:!1},t.next=18,r.a.collection("reported_users").create(data).then((function(){n.selected="",Object(c.Message)({showClose:!0,message:"User reported Successfully!",type:"success"})})).catch((function(){n.comment="",Object(c.Message)({showClose:!0,message:"Something went wrong!",type:"error"})}));case 18:case"end":return t.stop()}}),t)})))()},handleClose:function(e){return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},handleCloses:function(e){return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},handleClos:function(e){return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},beforeDestroy:function(){r.a.collection("advertisement").unsubscribe(this.ads.id),r.a.collection("chat_msgs").unsubscribe("*"),r.a.collection("chat").unsubscribe(this.chat_id)}},l=d,f=(n(651),n(653),n(9)),component=Object(f.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-container"},[t("div",{staticClass:"chat-container"},[t("div",{staticClass:"chat-header"},[t("div",{staticClass:"chat-header-details",staticStyle:{display:"flex","align-items":"center"}},[t("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e._back()}}},[t("mdicon",{attrs:{name:"arrow-left"}})],1),e._v(" "),t("h6",{staticStyle:{"font-weight":"600",padding:"0",margin:"0"}},[e._v("\n             Chat\n        ")])]),e._v(" "),t("h6",{staticStyle:{"font-weight":"600",padding:"0",margin:"0","margin-right":"25px",cursor:"pointer"},on:{click:function(t){e.dialogVisiblee=!0}}},[t("mdicon",{attrs:{name:"dots-vertical"}})],1)]),e._v(" "),t("div",{ref:"chatWindow",staticClass:"chat-window"},e._l(e.messages,(function(n,o){return t("div",{key:o,class:["chat-message",n.sent_by===e.$store.state.phone?"sent":"received"]},[o-1>0&&e.messages[o].date!=e.messages[o-1].date||o-1==-1?t("span",{staticStyle:{width:"100%","text-align":"center","font-size":"14px"}},[e._v(e._s(n.date))]):e._e(),e._v(" "),t("div",{staticClass:"message-bubble"},[t("p",{staticClass:"message-text"},[e._v(e._s(n.msg))]),e._v(" "),t("span",{staticClass:"message-time"},[e._v(e._s(n.time))])])])})),0),e._v(" "),0==e.blck?t("div",{staticClass:"chat-input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],attrs:{type:"text",placeholder:"Send a message..."},domProps:{value:e.newMessage},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage.apply(null,arguments)},input:function(t){t.target.composing||(e.newMessage=t.target.value)}}}),e._v(" "),t("button",{staticClass:"btn",on:{click:e.sendMessage}},[t("mdicon",{attrs:{name:"send"}})],1)]):e._e()]),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticStyle:{height:"400px","overflow-y":"scroll"}},[e._l(e.arr,(function(i,n){return t("div",{key:n,staticClass:"dia",style:{border:e.selected==i?"1px solid blue":""},on:{click:function(t){e.selected=i}}},[t("h6",{staticStyle:{"margin-top":"5px"}},[e._v(e._s(i))])])})),e._v(" "),t("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center",width:"100%"}},[t("div",{staticClass:"input-group col-md-12 mt-4 mb-3"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"comment"}],staticClass:"form-input",attrs:{type:"text",name:"title",onkeyup:"this.setAttribute('value', this.value);",value:""},domProps:{value:e.comment},on:{input:function(t){t.target.composing||(e.comment=t.target.value)}}}),e._v(" "),t("label",{staticClass:"form-input-label",attrs:{for:"username"}},[e._v("Comment")])])])],2),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticStyle:{width:"100%",display:"flex","justify-content":"space-between"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e._report()}}},[e._v("Report")]),e._v(" "),t("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("Close")])],1)])]),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisiblee,"before-close":e.handleCloses},on:{"update:visible":function(t){e.dialogVisiblee=t}}},[t("div",{staticStyle:{height:"140px","overflow-y":"scroll"}},[t("div",{staticClass:"dia",on:{click:function(t){e.dialogVisibles=!0,e.dialogVisiblee=!1}}},[t("h6",{staticStyle:{"margin-top":"5px"}},[e._v("1. Block User")])]),e._v(" "),t("div",{staticClass:"dia",on:{click:function(t){e.dialogVisible=!0,e.dialogVisiblee=!1}}},[t("h6",{staticStyle:{"margin-top":"5px"}},[e._v("2. Report User")])])]),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticStyle:{width:"100%",display:"flex","justify-content":"space-between"}},[t("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisiblee=!1}}},[e._v("Close")])],1)])]),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisibles,"before-close":e.handleClos},on:{"update:visible":function(t){e.dialogVisibles=t}}},[t("h6",{staticStyle:{"margin-top":"5px"}},[e._v("Are you sure to continue ?")]),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticStyle:{width:"100%",display:"flex","justify-content":"space-between"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e._block()}}},[e._v("Confirm")]),e._v(" "),t("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisibles=!1}}},[e._v("Close")])],1)])])],1)}),[],!1,null,"2efafade",null);t.default=component.exports}}]);